
## 基础知识(操作系统 &计算机网络)

**进程和线程的区别，进程间是如何通信的，线程之间如何通信，协程勒？**
进程和线程是计算机操作系统中的两个重要概念，它们有以下区别：
1.  运行方式不同：进程是程序在执行时的一个实例，具有独立的地址空间和资源，可以被操作系统分配时间片并运行；而线程则是进程内的一条执行路径，共享进程的资源和地址空间。
2.  切换开销不同：由于进程拥有独立的地址空间和资源，因此进程切换需要付出较高的代价，包括上下文切换、虚拟内存切换等；而线程之间的切换更为轻量级，只需要保存少量寄存器状态即可。
3.  通信方式不同：进程间通信（IPC）主要通过管道、消息队列、共享内存和套接字等方式进行；而线程间通信（IPC）主要通过锁、条件变量、原子操作等方式进行。

协程是一种用户态的轻量级线程，与传统线程不同，它使用协作式调度，避免了线程切换带来的开销。协程之间通信一般通过 Channel 来实现，Channel 是 Go 语言提供的用于协程间通信的机制。

**Https 和 Http 的对比，对称加密和非对称加密过程**
HTTP 和 HTTPS 都是应用层协议，用于客户端和服务器之间的通信。它们的主要区别如下：
1.  安全性不同：HTTPS 通过 SSL/TLS 协议对数据进行加密传输，可以保证通信过程中的安全性，而 HTTP 则没有提供任何数据加密保护。
2.  使用端口不同：HTTPS 默认使用 443 端口进行访问，而 HTTP 默认使用 80 端口。
3.  性能开销不同：HTTPS 由于需要进行 SSL/TLS 握手、密钥交换等操作，因此相比 HTTP 会增加一定的性能开销。

对称加密是指加密和解密使用相同的密钥，它的加密过程如下：
1.  将原始数据按照特定规则进行分组处理。
2.  对每个分组进行加密，使用相同的密钥进行加密和解密。
3.  将加密后的数据按照特定规则组合成密文。

非对称加密是指加密和解密使用不同的密钥，包括公钥和私钥。其加密过程如下：
1.  生成公钥和私钥。
2.  将原始数据按照特定规则进行加密，使用公钥进行加密。
3.  将加密后的数据发送给接收方。
4.  接收方使用私钥进行解密，得到原始数据。

总之，HTTPS 和 HTTP 在安全性、使用端口和性能开销等方面有较大区别。在进行数据加密时，对称加密使用相同的密钥进行加密和解密，非对称加密使用不同的密钥进行加密和解密，其中公钥用于加密，私钥用于解密。

**一次完成的http 请求流程**

HTTP 请求流程主要包括以下步骤：
1.  DNS 解析：客户端根据请求 URL 中的域名，向 DNS 服务器查询对应的 IP 地址。
2.  建立连接：客户端通过 TCP/IP 协议与服务器建立连接，三次握手完成后，双方开始进行数据传输。
3.  发送请求：客户端将 HTTP 请求报文发送给服务器，请求报文包括请求行、请求头、空行和请求体等部分。
4.  服务器响应：服务器接收到客户端的请求后，会根据请求内容生成相应的响应报文，并发送给客户端。响应报文包括状态行、响应头、空行和响应体等部分。
5.  接收响应：客户端接收到服务器响应后，对响应报文进行解析和处理，并通知浏览器进行相应操作（如渲染页面、下载文件等）。
6.  断开连接：在请求和响应结束后，客户端和服务器会断开连接，释放占用的资源。
需要注意的是，在实际请求过程中，还可能涉及代理、负载均衡、缓存等其他环节。此外，HTTP/2 和 HTTP/3 等新版本的协议对请求流程进行了优化和改进，提高了性能和安全性。

**大量Time Wait 应该如何排查**

大量的 TIME_WAIT 状态连接通常是因为客户端和服务器之间频繁地进行短暂连接所导致的，这些连接完成后会进入 TIME_WAIT 状态，等待一段时间后才能被操作系统清理。如果出现大量的 TIME_WAIT 连接，可能会导致服务器资源占用过高，影响系统性能。下面介绍一些排查 TIME_WAIT 问题的方法：
1.  使用 netstat 命令查看连接状态：在命令行中输入“netstat -an | grep TIME_WAIT”命令，可以查看当前机器上所有处于 TIME_WAIT 状态的连接数量。
2.  查看应用程序代码：如果应用程序在使用 Socket 进行网络编程时没有正确关闭连接，就会导致大量的 TIME_WAIT 连接堆积。此时需要检查应用程序代码，并确保在使用完连接后及时进行关闭。
3.  调整系统参数：可以调整操作系统的 TCP/IP 参数，例如修改 TCP_KEEPALIVE_TIME 和 TCP_FIN_TIMEOUT 等参数来缩短 TIME_WAIT 时间或减少 TIME_WAIT 连接数量。
4.  使用连接池：对于需要频繁建立连接的场景，可以考虑使用连接池，在多个短时间连接之间重用已有连接，从而减少 TIME_WAIT 连接数量。
5.  增加服务器资源：如果以上方法无法解决问题，可能需要增加服务器资源，如 CPU、内存、网络带宽等，以满足应用程序的性能需求。

总之，在排查 TIME_WAIT 问题时，需要结合实际情况进行分析，并采取相应的措施来解决问题，确保系统的稳定性和可靠性。

**什么是孤儿进程**

孤儿进程是指其父进程已经终止或者不再与该进程有任何关联，而该进程仍在继续运行的一种特殊状态。通常情况下，当一个进程终止时，操作系统会向其父进程发送一个 SIGCHLD 信号，告知父进程子进程已经终止。但是如果父进程已经退出，无法处理 SIGCHLD 信号，则该子进程就会成为孤儿进程。

孤儿进程的存在可能会占用系统资源并导致系统性能下降，因此操作系统需要对孤儿进程进行处理。具体来说，当一个进程成为孤儿进程时，操作系统会将其父进程 ID（PPID）设置为 1，即将其交由 init 进程接管，并由 init 进程负责对该孤儿进程进行状态管理和资源回收。

总之，孤儿进程是指其父进程已经终止或者不再与该进程有任何关联，而该进程仍在继续运行的一种特殊状态，操作系统会将其父进程 ID 设置为1，并由 init 进程接管进行状态管理和资源回收。


**TCP 三次握手和四次挥手全过程**
TCP 三次握手（Establishing Connection）过程如下：
1.  客户端向服务器发送 SYN 报文，表示请求建立连接，同时客户端随机生成一个初始序列号 seq=x。（SYN_SENT）
2.  服务器接收到 SYN 报文后，向客户端发送 SYN+ACK 报文作为应答，确认客户端的请求，并随机生成一个序列号 seq=y，同时将 ACK 确认号设置为 x+1。（SYN_RCVD）
3.  客户端接收到 SYN+ACK 报文后，向服务器发送 ACK 报文作为应答，确认收到了服务器的应答，并将 ACK 确认号设置为 y+1。（ESTABLISHED）
至此，TCP 连接建立成功，可以开始进行数据传输。

TCP 四次挥手（Terminating Connection）过程如下：
1.  客户端向服务器发送 FIN 报文，请求关闭连接。（FIN_WAIT_1）
2.  服务器接收到 FIN 报文后，向客户端发送 ACK 报文作为应答，同时将 ACK 确认号设置为客户端的序列号加 1。（CLOSE_WAIT）
3.  服务器向客户端发送 FIN 报文，请求关闭连接。（LAST_ACK）
4.  客户端接收到 FIN 报文后，向服务器发送 ACK 报文作为应答，同时将 ACK 确认号设置为服务器的序列号加 1。（TIME_WAIT）
5.  服务器接收到 ACK 报文后，等待一段时间后关闭连接。（CLOSED）
至此，TCP 连接关闭成功。
需要注意的是，在正常情况下，TCP 连接建立和关闭都是按照上述流程进行的。但是在实际网络环境中，也可能存在网络中断、延迟、丢包等问题，会影响 TCP 连接的建立和关闭过程。因此，需要在设计网络应用程序时考虑到这些问题，并采取相应的措施来保证应用程序的稳定性和可靠性。

## 数据库




